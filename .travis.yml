---
branches:
  only:
    - master

env:
  global:
    # DOCKER_EMAIL
    - secure: "BBHJoYTL9yqhANHiwkuMIfUampo8MvTbHTgQ14xPFezG/AZW5GG4tAR7tCcICESOYyqll1tTqi7l3ce3tlAWNUg6eD8zb4e2Dm7hCMrQsOnH5rcOGgiEtA43954HoYS2BNzsl8N14A1Ll5X1VjsP2rJsWJ7VRHrWaWxJyTfKQYxHwQa4MuApq69osoa1balSxpltPn+/6AQ1tj85duKSKwox+aZ/zaNd9U8zvBaEuHy4Av4W2cSIs7n5wfL3Lcr4SdSkSE1ZmyNlkU5VjupEHiSbvRaCxn3DOfOt92VFs4tXvr8K2IirN2RYl6/4vBihvsR/C6aJaMyNYna3Cyg8Zk/LFJjS1qyKgXcWWjvV7wQY7ukVLhnzow984gs5Gqmvz5WTWsIHs6fYj9tSENo/YzQZWg07WSBf7Cbm5WNKhCdVVjABjX1AS0yaAPmf0rxXirJfGCM/JeYs7ZbGwJlKqfFLwxKA6MQ2pU/FteY5rF6V2D4z6ls2CZ/E2+QcSn1VJtKWIvlhxN6LMgNe0BjFSzpWfo1q0TlAxDVjcZUB1CaGJT2FPfcA1cx6jHZ1hk4+p+GsURV/sbrv34ghBc9qTWPjqw3ypl1K1URKcE/Y/82eEAQm09RcRmO8HKwm3pV400FP367bfoCJILsNBhCs4gWc8pkdRTu9JYn2dMQOBUs="
    # DOCKER_USER
    - secure: "X1FBrkeFnsfiWpxThxSPiSFqzknmwaOTUvvqK+4FmNbnB3yi0HOmyIK5TFV08jjPs1LMEpSDKzO1xUxTx+anyPumaMGskzeTiJGM7EvqsCJVQYr68seWe8d2ulSRmNP6niece42RLRSmqlBKSsJdXUq/CSCg+bfVt3lBRVmDMw0jXsMppnQnai38YJS87byVxV5mf1xlglukzkMvf3T2+rSzeHySP5uVIMqEZJc9MpTuscqhhWpZDWbDagrnlNxTMSwDfZyFTppDr43XCV2dkKSgYx2D69JCeg+3eXaMzToZMTv+wKZGJAdF8osISMv0R0nF71iNpcgt+x5aZPfjXVWT/3IlmXgvfICLKqOkhvxlH8udaHNa0zfqEu0md5fjATljssG4s1G5rdBZU1qj6xTd9Ble2ee6xXiMGnoPPw8NnqJJ8WuvQrKJLV+bMM+C5F+uhW5eox1CujXuJo0LlfV8ZuMmSih6kyliE9rXOzqOfkNxB50hWG7hlg7h9OUbZj6+wu0xCzNP+QDR02xtEyDi8OMhGeeb0s9YT+LCuzuz01JQi8ndo9SgWVNW/EL0BiyN5VmCF+jQicRay2GxG5+jzxjOQMFKOIlupE5vQT1lsq383mXj8TDvRJ7ljSt7Xf1NVvhRS0Qkow/z0b9RbZQsxV1iyKu5kYg+tk0rm7Y="
    # DOCKER_PASS
    - secure: "FQCz0BM26nuoHUJbqPPTvb+l7GksM/OzyCwSwcxtZqUtDGPxVV73drEfGbn377YHvPmGgb6nxF1IlRwMQldxPfWfD/sJvvnc2ANVOEKzuP+u1ZhcQq6NziIUguXyi2uWe36BBIfpyRDo1aj8nLGcIdCd+9htDRk2WKRvARxWpbebfNFjKGPR3Pi/RwuysmwivG6oEWiImS6PROdAE/9NK/iw1E2S3q97q87zntI5Zl2BcbPsfQ7Mg5MXYAl3k2CuoVHIQI3QBJZdH1A8eO+RXpeOGTbJz1FJWpgRaIhmFlgP9YDImJrdpM2EZLSGLtf0wBfG6J5IlXEV2A4MQ0X1i4PtejBRZ1euTAlLmIFdWvcIdygxlNOZbcTxPHY5Tkg+MN/DlskYfsg9PjLM/KZd8gQkIH4DPAsNsB+HsrrSHRQhkeSA2JtD1XtGYm1dopJbmoA00rKEa3mqTNXZjce5m/n1QvqoqIWZx9Dq745r4T+B0CAc3wZ+UQ6KExtLXoyuk0xXQHyUI2s937Ks/8nDG5bHrSi0THDDRMWdVfSct2YY8gXkt8onOgURxkgpHECwO00L6M9TY9HBwQDz1SlwTdBYwXzmpsd5pbp9rMjCNLF9AO1n4Tj4BLOvdx5yuV731wajd0RpfkyHhKmnUDNlbfqmEnVhLaPfqZxC7kwb1AM="
    - DOCKER_REPO=spreadspace/ffmpeg

script:
  ### pull current images to potentially use docker build cache
  - docker pull $DOCKER_REPO:latest
  ### build the new images
  - docker build -t $DOCKER_REPO:latest .
  - docker tag $DOCKER_REPO:latest $DOCKER_REPO:$TRAVIS_BUILD_NUMBER
  ### push to docker-hub
  - docker login -u $DOCKER_USER -p $DOCKER_PASS
  - docker push $DOCKER_REPO:$TRAVIS_BUILD_NUMBER
  - docker push $DOCKER_REPO:latest
